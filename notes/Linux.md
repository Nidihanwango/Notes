# Linux 笔记

## Linux 基础篇

### 网络连接的三种方法

- 桥接模式，虚拟系统可以和外部系统进行通讯，但是容易造成IP冲突
- NAT模式，网络地址转换模式，虚拟系统可以和外部系统进行通讯，不会造成IP冲突
- 主机模式，独立的系统，不与外部发生联系

### 虚拟机克隆

- 方式一 
  - 直接拷贝一份安装好的虚拟机文件
- 方式二
  - 使用VMware的克隆操作
  - 克隆时需要先关闭Linux系统

### 虚拟机快照

- 利用VMware快照管理功能，可以快速将系统恢复到之前正常运行的状态

### 虚拟机的迁移和删除

- 在VMware安装的虚拟机的本质是文件，想要对虚拟机进行迁移或者删除操作，只需要对相对应的虚拟机文件进行操作

### 安装VMtools

- 安装VMtools可以在Windows下更好的管理VM虚拟机
- 可以设置Windows和虚拟机的共享文件夹
- 安装 VMtools 的步骤
  -  进入centos
  - 弹出镜像光驱
  - 设置虚拟机CD/DVD(SATA) 使用iso镜像文件
    - 文件指向vmware安装目录中的 **linux.iso**
  - 点击 vm 菜单的 install vmware tools
  - centos 会出现一个 vm 的安装包，xx.tar.gz
  - 拷贝到 /opt 
  - 使用解压命令 tar ，得到一个安装文件
    - tar -zxvf xx.tar.gz
  - 进入该 vm 解压的目录，/opt 目录下
  - 安装 ./vmware-install.pl
  - 全部使用默认设置即可安装成功
    - 出现Would you like to recover the wasted disk space by uninstalling VMware Tools at
      this time? (yes/no) [yes]  这条日志时需要输入 **no**
  - 注意
    - 安装 vmtools 需要有 gcc
      - gcc -v 查看 gcc 

### 使用 vmtools 设置共享文件夹

- 步骤

  - 打开虚拟机设置中的选项，设置共享文件的路径和总是启用即可

  - centos 下共享文件夹路径为 /mnt/hgfs

- 注意事项和细节说明
  - 在实际开发中，windows 和 linux 不在同一台机器上，需要通过远程方式实现文件的上传下载

### Linux 目录结构

- linux 的文件系统采用层级式树状目录结构，在此结构的最上层是根目录 **/** ，然后在此目录下创建其他目录
- 在linux中，一切皆文件
  - 在linux中，硬件会被映射为一个个的文件进行管理
- 具体的目录结构
  - /bin ( /usr/bin，/usr/local/bin )
    - 是 Binary 的缩写，这个目录存放着最经常常用的命令
  - /sbin ( /usr/sbin，/usr/local/sbin )
    - s 表示 super user 的意思，这里存放的是系统管理员使用的系统管理程序
  - /home
    - 存放普通用户的主目录，在 Linux 中，每个用户都会有一个自己的主目录，一般该目录名是以用户的账号命名
  - /root
    - 该目录为系统管理员，也称作超级权限者的用户主目录
  - /lib
    - 系统开机所需要的最基本的动态链接共享库，其作用类似 Windows 中的 DLL 文件，几乎所有的应用程序都需要用到这些共享库
  - /lost+found 
    - 这个目录一般是空的，当系统非法关机后，这个目录中就出现了一些文件
  - /etc
    - 所有的系统管理所需要的配置文件和子目录，my.conf
  - /usr
    - 一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于 windows 下的 program files 目录
  - /boot
    - 存放的是使用 linux 时，使用的一些核心文件，包括一些连接文件和镜像文件
  - /proc **不能动**
    - 这个目录是一个虚拟的目录，它是系统内存的映射，访问这个目录来获取系统信息
  - /srv **不能动**
    - service 的缩写，该目录存放一些服务启动之后需要提取的数据
  - /sys **不能动**
    - 这是 linux 2.6 内核的一个很大的变化，该目录下安装了 2.6 内核中新出现的一个文件系统 sysfs 
  - /tmp
    - 临时文件目录
  - /dev
    - 类似于 windows 的设备管理器，把所有的硬件用文件的形式存储
  - /media
    - linux 系统会自动识别一些设备，例如 U盘 光驱等等，当识别后，linux 会把识别的设备挂载到这个目录下
  - /mnt
    - 系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将外部存储挂载到 /mnt 上，然后进入该目录就可以查看里面的内容了
    - 例如上面的共享文件夹 **/mnt/hgfs**
  - /opt
    - 这是给主机额外安装软件存放的目录，如安装 oracle 数据库就可以存放到该目录下，默认为空
  - /usr/local
    - 这是另一个给主机额外安装软件所存放的目录，一般是通过源码方式安装的程序
  - /var
    - 这个目录存放着不断扩充着的东西，习惯将经常被修改的目录放在这个目录下，包括各种日志文件
  - /selinux [ security-enhanced linux ]
    - SELinux 是一种安全子系统，它能控制程序只能访问特定文件，有三种工作模式，可以自行设置
    - 默认关闭，使用需手动打开

## Linux 实操篇

### 远程登录 Linux 服务器

- Xshell 用于远程登录 Linux 服务器
- 操作步骤
  - Xshell 连接 Linux 服务器
    - 需要知道 Linux 服务器的 IP 地址，使用 ifconfig 命令查看
    - 然后在 Windows 上使用 ping <ip> 的方式测试是否能够正常连接 Linux 服务器
    - 根据 Xshell 软件提示新建连接
      - 名称随便设置
      - 主机为 Linux 的 IP 地址
      - 端口号为 22

### 远程文件传输

- Xftp 用于远程的文件上传与下载
- 操作步骤
  - 与 Xshell 的使用相似
  - 在新建连接时，选择协议为 SFTP，端口号为 22
  - 如何处理中文乱码
    - 修改连接 属性-编码 为 **utf-8**

### Vim 编辑器

- 正常模式
  - 进入 vim 的默认模式
  - 可以移动光标，可以删除字符或者删除整行，可以使用复制、粘贴来修改文档内容
- 插入模式
  - 在正常模式下，按 i、o、a、r 进入插入模式，也就是编辑模式
  - 按 Esc 键退出插入模式
- 命令行模式
  - 在正常模式下，输入 **:** 进入命令行模式
  - 可以输入指令来完成读取、存盘、替换、离开 vim、显示行号等操作